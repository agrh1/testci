# Dockerfile.bot
# Образ для Telegram-бота (aiogram).
# Важно: встраиваем GIT_SHA в ENV, чтобы /status мог показать версию.

FROM python:3.12-slim

ENV PYTHONDONTWRITEBYTECODE=1 \
    PYTHONUNBUFFERED=1

WORKDIR /app

# Ставим только зависимости бота
COPY requirements-bot.txt /app/requirements-bot.txt
RUN pip install --no-cache-dir -r /app/requirements-bot.txt

COPY . /app

# Встраиваем commit SHA на этапе сборки
ARG GIT_SHA=unknown
ENV GIT_SHA=${GIT_SHA}

CMD ["python", "-u", "bot.py"]

